function xhr(d,c){var e=new XMLHttpRequest;e.open(d,c);e.setRequestHeader("X-Requested-With","CNTP");e.onerror=function(){console.log('[XHR ERROR] Failed to "'+d+'" '+c+": "+e.status)};return e}function init(){var d=xhr("GET","php/portal_worker.php?init");d.onload=function(){if(200<=d.status&&400>d.status){var c=JSON.parse(d.response);document.getElementById("version").innerHTML=c[0];document.getElementById("mail_admin").setAttribute("href","mailto:"+c[1])}};d.send()}
function show_tab(d){var c=document.getElementsByClassName("tab");for(i=0;i<c.length;i++)c[i].style.display=c[i].id=="tab_"+d?"block":"none";c=document.getElementsByClassName("link");for(i=0;i<c.length;i++)c[i].className=c[i].id==d?c[i].className+" active":"link"}
function parse_url(d){var c;d=d.split("?");for(var e=0;e<d.length;e++){var f=d[e].split("="),b=decodeURIComponent(f[1]);if("log"==f[0]){document.getElementById("log_info").style.display="block";var a=document.getElementById("log_msg");a.style.display="block";show_tab("login");if("exists"==b)a.innerHTML+="<hr>There is already an Account associated with that Email Address!                           <br>Please try to login.";else if("empty"==b)a.innerHTML+="<hr>Please fill out all fields!";else if("nouser"==
b)a.innerHTML+="<hr>There is no Account registered to this Email Address!                           <br>Please register first if you are new.";else if("pwnope"==b)a.innerHTML+="<hr>Wrong Password!";else if("pwfail"==b)a.innerHTML+="<hr>Password reset failed!<br>Please try again or contact admin.";else if("pwinit"==b)a.innerHTML+="<hr>Password reset initiated.<br>Please check your inbox!";else if("pwreset"==b)var l=1;else if("pwsend"==b)a.innerHTML+="<hr>Password reset was successfull!                           <br>A new password will be delivered to your inbox.";
else if("pwchanged"==b)a.innerHTML+="<hr>Password change was successfull!<br>Please Login.";else if("mailchanged"==b)a.innerHTML+="<hr>Email address change in progress!                           <br>A verification link will be delivered to your inbox.";else if("chmail"==b)var k=1;else"verified"==b&&(a.innerHTML+="<hr>Registration completed successfully!<br>Please Login.")}"reg"==f[0]&&(a=document.getElementById("reg_info"),a.style.display="block",show_tab("registration"),"empty"==b?a.innerHTML+="<hr>Please fill out all fields!":
"pwnomatch"==b?a.innerHTML+="<hr>Passwords don't match! tYpO?":"invalid"==b?a.innerHTML+="<hr>Invalid Email Address!":"verify"==b?k=1:"success"==b?a.innerHTML+="<hr>Registration initiated.                           <br>A verification link will be delivered to your inbox.":"failed"==b&&(a.innerHTML+="<hr>Registration failed!<br>Please try again or contact admin."));"token"==f[0]&&(c=b);if("mail"==f[0]){var h=b;f=document.getElementsByClassName("mail");for(e=0;e<f.length;e++)f[e].value=b}}if(c&&h){var g=
xhr("POST","php/portal_worker.php");g.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");g.onreadystatechange=function(){4==g.readyState&&200==g.status&&(document.location=g.responseText)};k?g.send("verify&token="+encodeURIComponent(c)+"&mail="+encodeURIComponent(h)):l&&g.send("do_repw&token="+encodeURIComponent(c)+"&mail="+encodeURIComponent(h))}}
document.addEventListener("DOMContentLoaded",function(){init();show_tab("login");document.getElementById("login").addEventListener("click",function(){show_tab("login")},!1);document.getElementById("registration").addEventListener("click",function(){show_tab("registration")},!1);document.getElementById("demo").addEventListener("click",function(){show_tab("demo")},!1);document.getElementById("about").addEventListener("click",function(){show_tab("about")},!1);parse_url(location.search.substr(1))});